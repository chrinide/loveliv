{% extends "event_base.html" %}
{% block content %}
    {{ super() }}
    <style>
        #predict-chart {
            width: 100%;
            height: 400px;
        }
    </style>

    <div id="predict-chart"></div>
    <script>
        var predict_chart=echarts.init(document.getElementById('predict-chart'));
        $.get('api_predict.json').done(function(data) {
            predict_chart.setOption({
                title: {
                    text: '档线变化'
                },
                tooltip: {},
                legend: {
                    data : ['2300']
                },
                xAxis: {
                    type: 'category',
                    data: data['times']
                },
                yAxis: {
                    //type: 'value'
                },
                series: {
                    name: '2300',
                    type: 'line',
                    smooth: true,
                    data: data['l1']
                }
            });
        });
    </script>

    {# <table class="table table-hover">
        <thead>
            <tr>
                <th rowspan="2">时间</th>
                <th colspan="3">#2300</th>
                <th colspan="3">#11500</th>
                <th colspan="3">#23000</th>
            </tr>
            <tr>
                {% for _ in range(3) %}
                    <th>实际</th>
                    <th>线性</th>
                    <th>预测</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for time,t1pre,t1cur,t2pre,t2cur,t3pre,t3cur in lines[::5] %}
                <tr>
                    <td>{{ time | strftime }}</td>
                    {% for pre,cur in [(t1pre,t1cur),(t2pre,t2cur),(t3pre,t3cur)] %}
                        <td>{{ cur }}</td>
                        <td>{{ (pre*(time-g.begin)/(g.end-g.begin)) | int }}</td>
                        <td>{{ pre }}</td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </tbody>
    </table> #}
{% endblock %}