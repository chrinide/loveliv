{% extends "follow_base.html" %}
{% block content %}
    {{ super() }}
    <style>
        .chart {
            width: 100%;
            height: 75px;
        }
    </style>

    <div id="time-chart" class="chart"></div>
    <br>
    <div id="score-chart" class="chart"></div>
    <script>
        var time_chart=echarts.init(document.getElementById('time-chart')),
            score_chart=echarts.init(document.getElementById('score-chart')),
            USERNAME=decodeURIComponent("{{ g.fname | urlencode }}");
        time_chart.showLoading();
        score_chart.showLoading();
        $.get('{{ url_for('api_follower_stats',eventid=g.eventid,ind=g.follower_ind) }}').done(function(data) {
            time_chart.hideLoading();
            time_chart.setOption({
                title: [{
                    textBaseline: 'middle',
                    text: '得分时间',
                    top: 25
                }],
                tooltip: {
                    position: 'top'
                },
                singleAxis: [{
                    left: 150,
                    height: 50,
                    top: '5%',
                    type: 'category',
                    data: [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]
                }],
                series: [{
                    coordinateSystem: 'singleAxis',
                    type: 'scatter',
                    data: data['times'],
                    symbolSize: function (item) {
                        return item[1]*3;
                    }
                }]
            });
            score_chart.hideLoading();
            score_chart.setOption({
                title: [{
                    textBaseline: 'middle',
                    text: '分数',
                    top: 25
                }],
                tooltip: {
                    position: 'top'
                },
                singleAxis: [{
                    left: 150,
                    height: 50,
                    boundaryGap: false
                }],
                series: [{
                    coordinateSystem: 'singleAxis',
                    type: 'scatter',
                    data: data['scores'],
                    symbolSize: function (item) {
                        return item[1]*3;
                    }
                }]
            });
        });
    </script>
{% endblock %}